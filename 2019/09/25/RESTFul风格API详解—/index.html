<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>RestFul风格API详解 | 7757</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一、本文大纲 RESTful风格API的好处 RESTful API的设计风格  二、RESTful风格API的好处API（Application Programming Interface），顾名思义：是一组编程接口规范，客户端与服务端通过请求响应进行数据通信。REST（Representational State Transfer）决定了接口的形式与规则。RESTful是基于http方法的AP">
<meta property="og:type" content="article">
<meta property="og:title" content="RestFul风格API详解">
<meta property="og:url" content="http://yoursite.com/2019/09/25/RESTFul风格API详解—/index.html">
<meta property="og:site_name" content="7757">
<meta property="og:description" content="一、本文大纲 RESTful风格API的好处 RESTful API的设计风格  二、RESTful风格API的好处API（Application Programming Interface），顾名思义：是一组编程接口规范，客户端与服务端通过请求响应进行数据通信。REST（Representational State Transfer）决定了接口的形式与规则。RESTful是基于http方法的AP">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/images/restful.jpg">
<meta property="og:updated_time" content="2019-10-13T12:48:54.727Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RestFul风格API详解">
<meta name="twitter:description" content="一、本文大纲 RESTful风格API的好处 RESTful API的设计风格  二、RESTful风格API的好处API（Application Programming Interface），顾名思义：是一组编程接口规范，客户端与服务端通过请求响应进行数据通信。REST（Representational State Transfer）决定了接口的形式与规则。RESTful是基于http方法的AP">
<meta name="twitter:image" content="http://yoursite.com/images/restful.jpg">
  
    <link rel="icon" href="/images/favicon-16x16-next.png">
  
  <link rel="stylesheet" href="/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">7757 BOLG</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://www.instagram.com/uniten7/?hl=zh-cn" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://github.com/7757" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
          
            <a href="https://www.zhihu.com/people/7757-43-90/activities" target="_blank" class="nav-icn iconfont icon-zhihu"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">RestFul风格API详解</h2>
  <p class="sub">Sep 25, 2019</p>
  <article class="content">
    <h2 id="一、本文大纲"><a href="#一、本文大纲" class="headerlink" title="一、本文大纲"></a>一、本文大纲</h2><ul>
<li>RESTful风格API的好处</li>
<li>RESTful API的设计风格</li>
</ul>
<h2 id="二、RESTful风格API的好处"><a href="#二、RESTful风格API的好处" class="headerlink" title="二、RESTful风格API的好处"></a>二、RESTful风格API的好处</h2><p>API（Application Programming Interface），顾名思义：是一组编程接口规范，客户端与服务端通过请求响应进行数据通信。REST（Representational State Transfer）决定了接口的形式与规则。<strong>RESTful是基于http方法的API设计风格，而不是一种新的技术.</strong></p>
<ol>
<li>看Url就知道要什么资源</li>
<li>看http method就知道针对资源干什么</li>
<li>看http status code就知道结果如何</li>
</ol>
<p>对接口开发提供了一种可以广泛适用的规范，为前端后端交互减少了接口交流的口舌成本，是<strong>约定大于配置</strong>的体现。通过下面的设计，大家来理解一下这三句话。</p>
<blockquote>
<p>当然也不是所有的接口，都能用REST的形式来表述。在实际工作中，灵活运用，我们用RESTful风格的目的是为大家提供统一标准，避免不必要的沟通成本的浪费，形成一种通用的风格。就好比大家都知道：伸出大拇指表示“你很棒“的意思，绝大部分人都明白，因为你了解了这种风格习惯。但是不排除有些地区伸出大拇指表示其他意思，就不适合使用！</p>
</blockquote>
<h2 id="二、RESTful-API的设计风格"><a href="#二、RESTful-API的设计风格" class="headerlink" title="二、RESTful API的设计风格"></a>二、RESTful API的设计风格</h2><h3 id="2-1、REST-是面向资源的（名词）"><a href="#2-1、REST-是面向资源的（名词）" class="headerlink" title="2.1、REST 是面向资源的（名词）"></a>2.1、REST 是面向资源的（名词）</h3><p>REST 通过 URI 暴露资源时，会强调不要在 URI 中出现动词。比如：</p>
<table>
<thead>
<tr>
<th align="left">不符合REST的接口URI</th>
<th align="left">符合REST接口URI</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="left">GET /api/getDogs</td>
<td align="left">GET /api/dogs/{id}</td>
<td align="left">获取一个小狗狗</td>
</tr>
<tr>
<td align="left">GET /api/getDogs</td>
<td align="left">GET /api/dogs</td>
<td align="left">获取所有小狗狗</td>
</tr>
<tr>
<td align="left">GET /api/addDogs</td>
<td align="left">POST /api/dogs</td>
<td align="left">添加一个小狗狗</td>
</tr>
<tr>
<td align="left">GET /api/editDogs/{id}</td>
<td align="left">PUT /api/dogs/{id}</td>
<td align="left">修改一个小狗狗</td>
</tr>
<tr>
<td align="left">GET /api/deleteDogs/{id}</td>
<td align="left">DELETE /api/dogs/{id}</td>
<td align="left">删除一个小狗狗</td>
</tr>
</tbody></table>
<h3 id="2-2、用HTTP方法体现对资源的操作（动词）"><a href="#2-2、用HTTP方法体现对资源的操作（动词）" class="headerlink" title="2.2、用HTTP方法体现对资源的操作（动词）"></a>2.2、用HTTP方法体现对资源的操作（动词）</h3><ul>
<li>GET ： 获取、读取资源</li>
<li>POST ： 添加资源</li>
<li>PUT ： 修改资源</li>
<li>DELETE ： 删除资源<br><img src="https://img.kancloud.cn/77/8c/778c1a6b6927d9d4d1b0b038fecf0e38_955x422.png" alt="img"><br>实际上，这四个动词实际上就对应着增删改查四个操作，这就利用了HTTP动词来表示对资源的操作。</li>
</ul>
<h3 id="2-3-HTTP状态码"><a href="#2-3-HTTP状态码" class="headerlink" title="2.3. HTTP状态码"></a>2.3. HTTP状态码</h3><p>通过HTTP状态码体现动作的结果,不要自定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">200 OK </span><br><span class="line">400 Bad Request </span><br><span class="line">500 Internal Server Error</span><br></pre></td></tr></table></figure>

<p>在 APP 与 API 的交互当中，其结果逃不出这三种状态：</p>
<ul>
<li>所有事情都按预期正确执行完毕 - 成功</li>
<li>APP 发生了一些错误 – 客户端错误（如：校验用户输入身份证，结果输入的是军官证，就是客户端输入错误）</li>
<li>API 发生了一些错误 – 服务器端错误（各种编码bug或服务内部自己导致的异常）</li>
</ul>
<p>这三种状态与上面的状态码是一一对应的。如果你觉得这三种状态，分类处理结果太宽泛，http-status code还有很多。建议还是要遵循KISS(Keep It Stupid and Simple)原则，上面的三种状态码完全可以覆盖99%以上的场景。这三个状态码大家都记得住，而且非常常用，多了就不一定了。</p>
<h3 id="2-4-Get方法和查询参数不应该改变数据"><a href="#2-4-Get方法和查询参数不应该改变数据" class="headerlink" title="2.4. Get方法和查询参数不应该改变数据"></a>2.4. Get方法和查询参数不应该改变数据</h3><p>改变数据的事交给POST、PUT、DELETE</p>
<h3 id="2-5-使用复数名词"><a href="#2-5-使用复数名词" class="headerlink" title="2.5. 使用复数名词"></a>2.5. 使用复数名词</h3><p>/dogs 而不是 /dog</p>
<h3 id="2-6-复杂资源关系的表达"><a href="#2-6-复杂资源关系的表达" class="headerlink" title="2.6. 复杂资源关系的表达"></a>2.6. 复杂资源关系的表达</h3><p>GET /cars/711/drivers/ 返回 使用过编号711汽车的所有司机<br>GET /cars/711/drivers/4 返回 使用过编号711汽车的4号司机</p>
<h3 id="2-7-高级用法-HATEOAS"><a href="#2-7-高级用法-HATEOAS" class="headerlink" title="2.7. 高级用法:HATEOAS"></a>2.7. 高级用法:HATEOAS</h3><p><strong>HATEOAS</strong>:Hypermedia as the Engine of Application State 超媒体作为应用状态的引擎。<br>RESTful API最好做到HATEOAS，<strong>即返回结果中提供链接，连向其他API方法，使得用户不查文档，也知道下一步应该做什么</strong>。比如，当用户向api.example.com的根目录发出请求，会得到这样一个文档。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;link&quot;: &#123;</span><br><span class="line">  &quot;rel&quot;:   &quot;collection https://www.example.com/zoos&quot;,</span><br><span class="line">  &quot;href&quot;:  &quot;https://api.example.com/zoos&quot;,</span><br><span class="line">  &quot;title&quot;: &quot;List of zoos&quot;,</span><br><span class="line">  &quot;type&quot;:  &quot;application/vnd.yourformat+json&quot;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码表示，文档中有一个link属性，用户读取这个属性就知道下一步该调用什么API或者可以调用什么API了。</p>
<h3 id="2-8-资源过滤、排序、选择和分页的表述"><a href="#2-8-资源过滤、排序、选择和分页的表述" class="headerlink" title="2.8. 资源过滤、排序、选择和分页的表述"></a>2.8. 资源<strong>过滤、排序、选择和分页</strong>的表述</h3><p><img src="https://img.kancloud.cn/41/b9/41b90d46f19fe1277a5fc6e2828bbd39_845x190.png" alt="img"></p>
<h3 id="2-9-版本化你的API"><a href="#2-9-版本化你的API" class="headerlink" title="2.9. 版本化你的API"></a>2.9. 版本化你的API</h3><p>强制性增加API版本声明，不要发布无版本的API。如：/api/v1/blog</p>
<p><strong>面向扩展开放，面向修改关闭</strong>：也就是说一个版本的接口开发完成测试上线之后，我们一般不会对接口进行修改，如果有新的需求就开发新的接口进行功能扩展。这样做的目的是：当你的新接口上线后，不会影响使用老接口的用户。如果新接口目的是替换老接口，也不要在v1版本原接口上修改，而是开发v2版本接口，并声明v1接口废弃！</p>

  </article>
  <footer class="f-cf">
    
      <a href="/2019/10/13/Some-details-of-recent-life/" class="link f-fl">⟵Some details of recent life</a>
    
    
      <a href="/2019/06/24/spring-boot-2-x-新特性说明/" class="link f-fr">spring boot 2.x 新特性说明⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  Email:i7757@foxmail.com
  
    
      
        · <a href="https://www.instagram.com/uniten7/?hl=zh-cn" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://github.com/7757" target="_blank" class="nav-icn">GitHub</a>
      
    
      
        · <a href="https://www.zhihu.com/people/7757-43-90/activities" target="_blank" class="nav-icn">ZhiHu</a>
      
    
  
  <span class="copyright">All rights reserved @7757</span>
</footer>
  </div>
</body>
</html>